-- name: hae-tietyoilmoitukset
SELECT
  id
  tloik_id,
  paatietyoilmoitus,
  tloik_paatietyoilmoitus_id,
  luotu,
  luoja,
  muokattu,
  muokkaaja,
  poistettu,
  poistaja,
  ilmoittaja,
  ilmoittaja_etunumi,
  ilmoittaja_sukunumi,
  ilmoittaja_matkapuhelin,
  ilmoittaja_sahkoposti,
  urakka,
  urakka_nimi,
  urakoitsijayhteyshenkilo,
  urakoitsijayhteyshenkilo_etunumi,
  urakoitsijayhteyshenkilo_sukunumi,
  urakoitsijayhteyshenkilo_matkapuhelin,
  urakoitsijayhteyshenkilo_sahkoposti,
  tilaaja,
  tilaajan_nimi,
  tilaajayhteyshenkilo,
  tilaajayhteyshenkilo_etunumi,
  tilaajayhteyshenkilo_sukunumi,
  tilaajayhteyshenkilo_matkapuhelin,
  tilaajayhteyshenkilo_sahkoposti,
  luvan_diaarinumero,
  tr_numero,
  tr_alkuosa,
  tr_alkuetaisyys,
  tr_loppuosa,
  tr_loppuetaisyys,
  tien_nimi,
  kunnat,
  alkusijainnin_kuvaus,
  loppusijainnin_kuvaus,
  alku,
  loppu,
  viivastys_normaali_liikenteessa,
  viivastys_ruuhka_aikana,
  ajoneuvo_max_korkeus,
  ajoneuvo_max_leveys,
  ajoneuvo_max_pituus,
  ajoneuvo_max_paino,
  ajoittaiset_pysatykset,
  ajoittain_suljettu_tie,
  pysaytysten_alku,
  pysaytysten_loppu,
  lisatietoja,
  urakkatyyppi,
  tyotyypit,
  sijainti,
  tyoajat,
  vaikutussuunta,
  kaistajarjestelyt,
  nopeusrajoitukset,
  tienpinnat,
  kiertotien_mutkaisuus,
  kiertotienpinnat,
  liikenteenohjaus,
  liikenteenohjaaja,
  huomautukset
FROM tietyilmoitus
WHERE alku >= :alku AND loppu <= :loppu
ORDER BY i.ilmoitettu DESC, it.kuitattu DESC
LIMIT :max-maara :: INTEGER;

